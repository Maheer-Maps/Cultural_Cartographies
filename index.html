<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cultural Cartographies</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Cormorant:ital,wght@0,300..700;1,300..700&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Manrope:wght@200..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Rubik+Mono+One&family=Special+Gothic+Expanded+One&family=Tilt+Warp&family=Urbanist:wght@100..900&display=swap" rel="stylesheet">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>

    html {
  scroll-behavior: smooth;
    }
    
    
    body {
      margin: 0;
      padding: 0;
      font-family: "Bricolage Grotesque", sans-serif;
      background-color:#333432;
    }

    /* Navigation */
    .nav-buttons {
      position: fixed;
      top: 30px;
      right: 40px;
      display: flex;
      gap: 15px;
      z-index: 1000;
    }

    .nav-buttons a {
      font-family: "Bricolage Grotesque", sans-serif;
      color: white;
      text-transform: uppercase;
      border: 1px solid white;
      background-color: rgba(51, 52, 50, 0.9);
      padding: 6px 15px;
      border-radius: 20px;
      text-decoration: none;
      font-size: 0.85rem;
      transition: background-color 0.3s, color 0.3s;
      margin: 6px 0;
    }

    .nav-buttons a:hover {
      background-color: white;
      color: black;
    }

    .dropdown-menu {
      background-color: transparent;
      border: none;
    }

    .dropdown-menu .dropdown-item:hover {
      background-color: #eee;
      color: #000;
      
    }

    .title-section {
  height: 100vh;
  position: relative;
}

.title-image-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.title-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: opacity 0.5s ease;
}

.default-image {
  opacity: 1;
}

.hover-image {
  opacity: 0;
}

.title-image-container:hover .default-image {
  opacity: 0;
}

.title-image-container:hover .hover-image {
  opacity: 1;
}

.title {
  position: absolute;
  bottom: 100px; 
  right: 100px;  
  z-index: 10;
  font-size: 3rem;
  font-weight: 700;
  color: #ffffff;
  font-family: "Rubik Mono One", monospace;
  text-transform: uppercase;
  margin: 0; 
  padding: 0; 
}

    section {
      background-color: #333432;
    }

    p {
      font-size: 1.3rem;
      color: #ffffff;
      font-family: "EB Garamond", serif;
    }

    .section-title {
  font-size: 2.5rem;
  font-family: 'Bricolage Grotesque', sans-serif;
  text-transform: uppercase;
  color: #D9D9D9;
  padding: 0px 40px 20px;
  margin: 0;
}
.chart-title {
      top: 20px;
      left: 0;
      right: 0;
      text-align: center;
      font-size: 22px;
      font-weight: 600;
      color: #D9D9D9;
      z-index: 10;
      font-family: 'Bricolage Grotesque', sans-serif;
      text-transform: uppercase;
    }

.chart-toggle-btn {
  font-family: "Bricolage Grotesque", sans-serif;
  color: whitesmoke;
  text-transform: uppercase;
  border: 1px solid whitesmoke;
  padding: 6px 14px;
  border-radius: 20px;
  text-decoration: none;
  font-size: 0.85rem;
  background-color: transparent;
  transition: background-color 0.3s, color 0.3s;
}

.chart-toggle-btn:hover,
.chart-toggle-btn.active {
  background-color: whitesmoke;
  color: black;
}

.city-network-wrapper {
  font-family: "EB Garamond", serif;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  gap: 20px;
  padding: 0px 40px 0px 40px;
  height: 90vh;
  box-sizing: border-box;
  color: white;
}

.city-network-left, .city-network-right {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
}


.city-network-desc {
  padding:0px 0px 10px 40px;
  font-size: 1.2rem;
  line-height: 1.6;
  max-width: 100%;
  color: white;
}

.infographic-img {
  width: 90%;
  height: auto;
  max-width: 100%;
  object-fit: contain;
}

.two-column {
  padding:20px 0px 10px 40px;
  display: flex;
  gap: 30px;
  flex-wrap: wrap;
}

.column {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
  font-family: "EB Garamond", serif;
  color: white;
}

.two-column.reversed {
  flex-direction: row-reverse !important;
  flex-wrap: nowrap;
}

.music-chart {
  width: 110%;
  height: 50vh;
  border: none;
  margin-bottom: 20px;
}

.section-flex {
  display: flex;
  flex-direction: row;
  padding: 60px;
  gap: 20px;
  height: 100vh;
  box-sizing: border-box;
}

.left-column {
  flex: 4;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}


.chart-container {
  width: 750px;
  height: 300px;
  border-radius: 8px;
  overflow: hidden;
}

.chart-container iframe {
  width: 100%;
  height: 100%;
  border: none;
  box-sizing: border-box;
}

.right-column {
  flex: 3;
  display: flex;
  flex-direction: column;
  height: 100%;
}
.right-column iframe {
  flex-grow: 1;
  height: 100%;
  width: 100%;
  border: none;
}

.wide-chart-container {
  width: 70vh;
  height: 60vh;
  margin: 0 auto;
  overflow: hidden;
}

.wide-chart-container iframe {
  width: 100%;
  height: 100%;
  border: none;
}
.process-button a {
      font-family: "Bricolage Grotesque", sans-serif;
      color: white;
      text-transform: uppercase;
      border: 1px solid white;
      padding: 3px 10px;
      border-radius: 20px;
      text-decoration: none;
      font-size: 0.85rem;
      background-color: transparent;
      transition: background-color 0.3s, color 0.3s;
      margin: 6px 0;
    }

    .process-button a:hover {
      background-color: white;
      color: black;
    }

    a {
      color:white
    }
  </style>
</head>
<body>

  <!-- Navigation -->
  <div class="nav-buttons">
    <div class="dropdown">
      <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Menu</a>
      <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="#citynetwork">London's Cultural network</a></li>
        <li><a class="dropdown-item" href="#2018_2023">Cultural network comparison</a></li>
        <li><a class="dropdown-item" href="#incomparable">Incomparable Data <data value=""></data></a></li>
        <li><a class="dropdown-item" href="#capital">London as a global cultural benchmark?</a></li>
        <li><a class="dropdown-item" href="#2017_2025">spatio-temporal analysis</a></li>
        <li><a class="dropdown-item" href="#boroughs">Borough by borough breakdown</a></li> 
        <li><a class="dropdown-item" href="#inequitable">Inequitable Access</a></li>
        <li><a class="dropdown-item" href="#casestudies">Cultural Case Studies</a></li>
        <li><a class="dropdown-item" href="#process">Our Process</a></li>
        <li><a class="dropdown-item" href="#team">Meet The Team</a></li>

      </ul>
    </div>
  </div>

  <!-- Title -->
  <section class="title-section">
    <div class="title-image-container">
      <img src="LandingCollage.png" alt="Cultural Cartographies" class="title-image default-image">
      <img src="LandingCollage2.png" alt="Cultural Cartographies" class="title-image hover-image">
      <div class="title">Cultural Cartographies</div>
    </div>
  </section>

  <!-- City Network Section -->
<section id="citynetwork" style="padding: 0; margin: 0;">
  <div class="city-network-wrapper">
    
    <div class="city-network-left">
      <h2 class="section-title ">LONDON'S CULTURAL NETWORK</h2>
      <p class="city-network-desc">
        Our web-analysis of London’s cultural network, visualises gaps in cultural infrastructure and data through a spatial-temporal lens. While existing maps—such as the Cultural Infrastructure Map by the Mayor of London and the Culture and Place Data Explorer by Arts Council England—offer valuable static overviews, they fail to reflect how London’s cultural landscape has shifted over time, particularly in the wake of COVID-19. Cultural consumption spaces experienced the greatest losses, prompting a targeted investigation into how access to culture has changed across both space and time begging the research question - 
        <em>Is access to London's cultural network equitable across time and geography?</em>
      </p>
      <img src="./diagram3.png" alt="Net Loss Bar Chart" class="infographic-img">
    </div>

    <div class="city-network-right">
      <img src="./diagram1.png" alt="Cultural Closures Donut Chart" class="infographic-img">
      <img src="./diagram2.png" alt="Cultural Consumption Net Loss" class="infographic-img">
    </div>

  </div>
</section>

  <!-- 2018-2023 -->
<section id="2018_2023" style="padding: 60px;">
  <h2 class="section-title">Cultural Network comparison</h2>
  <div class="two-column">
    <div class="column" style="flex: 2;">
      <iframe src="./networkmap2.html" style="width: 95%; height: 80vh; border: none;" id="mapFrame"></iframe>
    </div>
    <div class="column" style="flex: 1;">
      <div class="year-toggle">
        <button class="chart-toggle-btn active" data-year="2018">2018</button>
        <button class="chart-toggle-btn" data-year="2023">2023</button>
      </div>
      <p id="map-description">
        <!-- Initial text for 2018 -->
        A natural starting point for exploring cultural networks is to map them geographically. 
        To understand how accessible different types of cultural infrastructure are across London, 
        we used the 15-minute city framework—focusing on whether people can reach venues within a 
        walkable 1km radius. We grouped these venues by type (cinemas, galleries, theatres, etc.) 
        to highlight the diversity of cultural infrastructure.
    Since the only verified datasets for cultural infrastructure in London come from 
    the Greater London Authority (GLA) for the years 2018 and 2023, we began by mapping the 
    2018 data to use as a baseline, before comparing it with 2023 to spot trends and changes…
      </p>
    </div>
  </div>
</section>

<!-- 2018-2023 - continuation -->
<section id="incomparable" style="padding: 60px 60px 60px 60px;">
  <h2 class="section-title">Incomparable Data</h2>
  <div class="two-column reversed">
    <div class="column">
      <p>
        <!-- New text for 2023 -->
        What we found was that nearly 38% of the venues listed in 2018 were missing in 
        the 2023 dataset—not because they had physically closed, but due to changes 
        in how the data was collected and categorised. Some venue types had been dropped, 
        and others redefined, making the two datasets less comparable than they first appeared.
        This inconsistency meant that, rather than showing a clear trend over time, the maps were 
        effectively illustrating two different versions of London’s cultural network. As a result,
         drawing reliable conclusions about long-term changes in cultural access became much more complex.
      </p>
    </div>
    <div class="column" style="flex: 2;">
      <iframe src="./dotdiagram.html" style="width: 95%; height: 80vh; border: none;" id="dotMapFrame"></iframe>
    </div>
  </div>
</section>

   <!-- London- cultural capital? -->
   <section id="capital" style="min-height: 100vh; padding: 60px;">
    <div class="city-network-wrapper">
    
      <div class="city-network-left">
    <h2 class="section-title">LONDON AS A GLOBAL CULTURAL BENCHMARK?</h2>
    <p class="city-network-desc">
      Our analysis, limited to 2023 data due to incompatibility with earlier years, compared London’s cultural infrastructure to that of other major cities using the World Cities Cultural Forum dashboard.
       Raw GLA data shows London as a cultural leader, but normalization by population and land area revealed underperformance, suggesting greater sector vulnerability. External reports confirmed this: the Music Venues Trust noted 125 venue closures in 2023, while museums saw an 8% post-pandemic decline.
        These trends highlight systemic fragility, challenging assumptions from the GLA’s 2023 dataset. 
        Because the GLA dataset lacks long-term tracking, we brought in additional data sources—including scraped datasets—to get a more complete picture (see <a href="#process">Our Process</a> for more). 
        This underscores the need for nuanced metrics and expanded datasets to accurately determine risks to the city’s cultural infrastructure.
        </p>
    <img src="./cities.png" alt="Cities Diagram" class="infographic-img">
  </div>


    <div class="city-network-right">
      <iframe src="./Music_vs_cities.html" class="music-chart" title="Music Network Map"></iframe>
      <iframe src="./Museum_vs_cities.html" class="music-chart" title="Museum Network Map"></iframe>
    </div>

</div>

   
  </section>
  
   <!-- 2017-2025 -->
  <section id="2017_2025" class="section-flex">
    <div class="left-column">
      <h2 class="section-title">LONDON CULTURAL NETWORK: SPATIO-TEMPORAL ANALYSIS</h2>

      <p class="city-network-desc">
        Our spatio-temporal analysis of London’s cultural network, based on scraped consumption data (2017–2025), uncovered critical trends overlooked by official GLA datasets. While the GLA reported growth in libraries (claiming 347 by 2022), our findings revealed that both theatres and libraries experienced significant decline, exposing inconsistencies in how cultural infrastructure is recorded. Interestingly, community centres were the only type of cultural spaces focused on consumption that showed growth. This may indicate a move toward more locally-based cultural offerings, potentially taking priority over larger, more specialized venues. Borough-level revealed significant inequalities, with certain areas experiencing severe cultural depletion while others maintained better accessibility. These disparities challenge the reliability of static administrative data and emphasize the need for dynamic, detailed insights to better understand and support London’s cultural ecosystem.

      <div class="chart-container">
        <iframe src="Line.html"></iframe>
      </div>
    </div>
    <div class="right-column">
      <iframe src="./2017_2025.html"></iframe>
    </div>
  </section>

<!-- Borough by borough -->
<section id="boroughs" style="min-height: 100vh; padding: 60px; box-sizing: border-box;">

  <!-- First Part: Borough Breakdown and Stacked Bar -->
  <div style="margin-bottom: 60px; width: 100%;">
    <!-- Section Title -->
    <h2 class="section-title" style="margin-bottom: 20px; width: 100%;">Borough by borough breakdown</h2>

    <!-- Description Text -->
    <div style="width: 100%; max-width: 100%; margin: 0 auto 20px; padding: 0 20px; box-sizing: border-box;">
      <p class="city-network-desc" style="width: 100%; max-width: 100%; margin: 0 auto; line-height: 1.6; font-size: 1.2rem;">
        Our comparative analysis of London’s boroughs integrated the Greater London Authority’s (GLA) 2023 cultural asset counts with OpenStreetMap (OSM) data tracking percentage changes between 2017 and 2025. While the datasets are not directly comparable—GLA provides absolute figures, whereas OSM reflects growth rates—their combined examination uncovered valuable insights. Havering, despite having among the fewest cultural assets, exhibited the highest growth rate, indicating promising potential for long-term sustainability. Meanwhile, access to community centres varied significantly across boroughs, with a disparity exceeding 100 venues between the most and least well-served areas—a gap likely to widen due to uneven investment.
        <br><br>
        Limitations include the exclusion of negative change rates (closures/declines) and a lack of normalization for area, population density, or income. Additionally, spatial mapping was not conducted, leaving geographic patterns unexplored. These gaps highlight the need for deeper, contextualized research to inform equitable cultural policy. </p>
    </div>

    <!-- Chart Fills Remaining Height -->
    <div style="height: calc(70vh + 100px); width: 100%;">
      <iframe src="./stacked_bar.html" style="width: 100%; height: 100%; border: none;"></iframe>
    </div>
  </div>
</section>

<!-- Inequitable Access - Page 1 -->
<section id="inequitable" style="padding: 60px;">
  <h2 class="section-title">Inequitable Access</h2>
  
  <!-- Charts Row -->
  <div style="display: flex; gap: 40px; margin-bottom: 40px;">
    <!-- Community Centers Chart -->
    <div style="flex: 2;">
      <div class="wide-chart-container" style="width: 100%; height: 60vh;">
        <iframe src="Community_centres.html" style="width: 100%; height: 100%; border: none; margin-top: 40px;"></iframe>
      </div>
    </div>
    
    <!-- Cinema Visualization -->
    <div style="flex: 1;">
      <div class="chart-title" style="margin-bottom: 20px;">
        Cinema Access Analysis
      </div>
      <!-- Toggle Buttons -->
      <div class="d-flex justify-content-center gap-3 mb-4">
        <a href="#" id="mapViewBtn2" class="chart-toggle-btn">NUMBERS OF CINEMAS PER BOROUGH</a>
        <a href="#" id="barViewBtn2" class="chart-toggle-btn">CINEMA ECONOMIC ACCESSIBILITY</a>
      </div>
      <!-- Chart Container -->
      <div id="main2" style="width: 100%; height: 60vh;"></div>
    </div>
  </div>

  <!-- Text Content -->
  <div style="width: 100%; margin-bottom: 40px;">
    <p class="city-network-desc">
      Our spatial analysis of London's cultural infrastructure reveals troubling disparities in access to vital community assets. By examining three key indicators—cinemas, community centers, and libraries—we uncover how raw data often obscures the true picture of cultural equity across boroughs.
      <br><br>
      <strong>Community Centers:</strong> City of London & Lewisham show strong per-capita access despite appearing underserved in raw counts whilst Camden's seemingly comprehensive coverage shrinks when adjusted for population density.
      <br><br>
      <strong>Cinemas:</strong> GLA data inaccuracies falsely erased all cinemas in Waltham Forest/Sutton.
      <br><br>
      <strong>Libraries:</strong> A clear decline in library provision emerged across most boroughs, with no discernible spatial pattern between high- and low-performing areas. However, this analysis was limited by its exclusion of public vs. private libraries (e.g., university libraries), some of which offer community access.
    </p>
  </div>
</section>

<!-- Libraries Section -->
<section id="boroughs" style="padding: 60px; box-sizing: border-box;">
  <div>
    <h2 class="section-title" style="margin-bottom: 20px;">Library Access Changes (2017-2025)</h2>
    
    <!-- Toggle Buttons -->
    <div class="d-flex justify-content-center gap-3 mb-4">
      <a href="#" id="mapViewBtn" class="chart-toggle-btn">Map View</a>
      <a href="#" id="barViewBtn" class="chart-toggle-btn">Bar Chart</a>
    </div>

    <!-- Chart Container -->
    <div id="main" style="width: 100%; height: 80vh;"></div>
  </div>
</section>


 <!-- Case studies -->
<section id="casestudies" style="padding: 60px 60px 0 60px; height: 100vh; box-sizing: border-box; display: flex; flex-direction: column;">

  <!-- Section Title -->
  <h2 class="section-title" style="margin-bottom: 20px;">Cultural Case Studies</h2>

  <!-- Fullscreen Iframe -->
  <div style="flex: 1; width: 100%;">
    <iframe src="./Casestudies.html" style="width: 100%; height: 100%; border: none;"></iframe>
  </div>

</section>


       <!-- Subsection: Bromley -->
  <div style="height: 100vh;">
    <iframe src="./Bromley.html"
            style="width: 100%; height: 100%; border: none ;display: block;"></iframe>
  </div>


      <!-- Subsection: Hackney -->
  <div style="height: 100vh;">
    <iframe src="./Hackney.html"
            style="width: 100%; height: 100%; border: none; display: block;"></iframe>
  </div>


  <!-- Subsection: Hillingdon -->
  <div style="height: 100vh;">
    <iframe src="./Hillingdon.html"
            style="width: 100%; height: 100%; border: none; display: block;"></iframe>
  </div>

    </div>
  </section>

 <!-- Process -->
 <section id="process" style="min-height: 90vh; padding: 60px; display: flex; flex-direction: column; box-sizing: border-box;">


<!-- Section Title -->
<h2 class="section-title" style="margin-bottom: 0px;">Our Process</h2>

<!-- Content Row -->
<div style="flex: 1; display: flex; justify-content: space-between; align-items: flex-start; gap: 40px;">

  <!-- Left Column: Text -->
  <div style="flex: 1; max-width: 60%; display: flex; flex-direction: column; padding: 15px;">

    <!-- Text -->
    <p style="font-size: 1.1rem; line-height: 1.6;">
      Understanding London’s cultural landscape required moving beyond traditional datasets. Our project began with the Cultural Infrastructure Data from the Greater London Authority (GLA), an official source mapping various cultural venues across the city. However, we quickly identified major gaps: some cultural spaces were missing, others were misclassified, and the data lacked detail over time.
    </p>

    <p style="font-size: 1.1rem; line-height: 1.6;">
      To address this, we expanded our data collection. We used Overpass Turbo, a tool that allows us to extract publicly available data from OpenStreetMap (OSM)—a community-built map of the world. This helped us identify cultural venues that may have been overlooked or recently added, especially smaller or hyper-local spaces often missed by official surveys.
    </p>

    <p style="font-size: 1.1rem; line-height: 1.6;">
      But collecting more data wasn’t enough. We recognised that no dataset is truly neutral. Who collects the data, what they choose to include, and how they categorise venues all influence the story that gets told. To respond to this, we adopted principles from Data Feminism—a framework that values multiple perspectives and challenges power imbalances in how data is produced and used. This meant combining quantitative data (like venue counts and access rates) with qualitative insights, such as interviews with cultural workers and community members.
    </p>

    <p style="font-size: 1.1rem; line-height: 1.6;">
      Throughout this process, we remained committed to transparency. Not all data sources were directly comparable—for example, GLA figures count absolute venue numbers, while OSM shows growth rates. Still, by putting them side by side, we could uncover deeper patterns, inconsistencies, and blind spots in cultural provision.
    </p>

    <p style="font-size: 1.1rem; line-height: 1.6;">
      Ultimately, our goal was not just to map infrastructure, but to highlight where access is unequal, and to support better policy decisions grounded in a fuller picture of London’s cultural life.
    </p>
  </div>

  <!-- Right Column: Image + Buttons -->
<div style="flex: 1; max-width: 40%; display: flex; flex-direction: column; align-items: flex-end; gap: 10px;">
  <img src="DATA_DIAGRAM.png" alt="Data Diagram" style="max-width: 100%; height: auto;">

  <!-- Buttons -->
  <div class="process-button" style="display: flex; flex-direction: column; gap: 0px; width: 100%;">
    <a href="https://data.london.gov.uk/dataset/cultural-infrastructure-map" style="text-align: center; display: block;">CULTURAL INFRASTRUCTURE DATA</a>
    <a href="https://overpass-turbo.eu/" style="text-align: center; display: block;">OVER-PASS TURBO</a>
    <a href="https://worldcitiescultureforum.com/cities/?_gl=1*iqrlto*_up*MQ..*_ga*ODEzMTE4NTAzLjE3NDg0MjkxNDQ.*_ga_0RH3RGNJVS*czE3NDg0MjkxNDMkbzEkZzAkdDE3NDg0MjkxNDMkajYwJGwwJGgw" style="text-align: center; display: block;">WORLD CULTURAL CITIES FORUM</a>
    <a href="https://data.london.gov.uk/dataset/earnings-place-residence-borough" style="text-align: center; display: block;">INCOME DATA</a>
    <a href="https://data.london.gov.uk/dataset/land-area-and-population-density-ward-and-borough" style="text-align: center; display: block;">POPULATION DATA</a>
  </div>
</div>


</div>


<!-- The Team Section -->
<section id="team" style="min-height: 100vh; padding: 60px; box-sizing: border-box; display: flex; flex-direction: column;">

  
  <!-- Section Title -->
  <h2 class="section-title" style="margin-bottom: 20px;">Meet The Team</h2>

  <!-- Iframe (fills remaining space below title) -->
  <iframe src="./The_Team.html" style="flex-grow: 1; width: 100%; border: none;"></iframe>
</section>

  <!-- Map / Data Logic -->
<script src="app.js"></script>

  <!-- Bootstrap JS (Dropdown) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Libraries chart -->

<script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const chartDom = document.getElementById('main');
  const myChart = echarts.init(chartDom);

  myChart.showLoading();

  const LONDON_GEOJSON_URL = 'https://raw.githubusercontent.com/radoi90/housequest-data/master/london_boroughs.geojson';

  $.get(LONDON_GEOJSON_URL, function (londonJson) {
    myChart.hideLoading();
    echarts.registerMap('London', londonJson);

    const data = [
      { name: 'Barking and Dagenham', value: 0.00 }, { name: 'Barnet', value: -0.20 },
      { name: 'Bexley', value: -0.60 }, { name: 'Brent', value: 0.25 },
      { name: 'Bromley', value: -0.13 }, { name: 'Camden', value: -0.13 },
      { name: 'City of London', value: 0.00 }, { name: 'Croydon', value: 0.20 },
      { name: 'Ealing', value: -0.18 }, { name: 'Enfield', value: 0.10 },
      { name: 'Greenwich', value: -0.08 }, { name: 'Hackney', value: 0.00 },
      { name: 'Hammersmith and Fulham', value: 0.09 }, { name: 'Haringey', value: -0.43 },
      { name: 'Harrow', value: -0.14 }, { name: 'Havering', value: 1.00 },
      { name: 'Hillingdon', value: 0.17 }, { name: 'Hounslow', value: -0.25 },
      { name: 'Islington', value: 0.00 }, { name: 'Kensington and Chelsea', value: 0.43 },
      { name: 'Kingston upon Thames', value: 0.11 }, { name: 'Lambeth', value: -0.08 },
      { name: 'Lewisham', value: -0.06 }, { name: 'Merton', value: 0.11 },
      { name: 'Newham', value: 0.00 }, { name: 'Redbridge', value: -0.56 },
      { name: 'Richmond upon Thames', value: -0.60 }, { name: 'Southwark', value: 0.08 },
      { name: 'Sutton', value: -0.33 }, { name: 'Tower Hamlets', value: -0.20 },
      { name: 'Waltham Forest', value: -0.33 }, { name: 'Wandsworth', value: -0.33 },
      { name: 'Westminster', value: 0.25 }
    ];

    data.sort((a, b) => a.value - b.value);

    const mapOption = {
  tooltip: {
    trigger: 'item',
    formatter:'{b}: {c}', 
    backgroundColor: '#333432', 
    borderColor: '#ffffff', 
    borderWidth: 1, 
    textStyle: {
      color: '#ffffff', 
      fontFamily: 'Bricolage Grotesque', 
      fontSize: 14 
    },
    padding: 10, 
    extraCssText: 'border-radius: 10px;' 
  },
  visualMap: {
    left: 'right',
    min: -0.60,
    max: 1.00,
    inRange: {
      color: ['#C79BF2', '#C8C2F2', '#C4E5F2', '#A0F2CC', '#5EF275'] 
    },
    text: ['High', 'Low'],
    calculable: true,
    textStyle: {
      color: '#ffffff', 
      fontFamily: 'Bricolage Grotesque',
      fontSize: 14
    }
  },
  series: [{
    id: 'libraries_change',
    type: 'map',
    roam: false,
    map: 'London',
    universalTransition: true,
    animationDurationUpdate: 1000,
    data: data,
    emphasis: {
      itemStyle: {
        areaColor: '#FFFFFF', 
        borderColor: '#000000', 
        borderWidth: 1 
      },
      label: {
        color: '#000000', 
        fontFamily: 'Bricolage Grotesque',
        fontSize: 12
      }
    }
  }]
};

    const barOption = {
      tooltip: { trigger: 'axis' },
      textStyle: {
    color: '#ffffff',
    fontFamily: 'Bricolage Grotesque',
    fontSize: 12
  },
      xAxis: { type: 'value' },
      yAxis: {
        type: 'category',
        axisLabel: { rotate: 30 },
        data: data.map(d => d.name)
      },
      series: [{
        id: 'libraries_change',
        type: 'bar',
        data: data.map(d => d.value),
        universalTransition: true,
        itemStyle: {
          color: (params) => params.value < 0 ? '#A9BED9' : '#5EF275'
        }
      }],
      animationDurationUpdate: 2000
    };

    let currentView = 'map';
myChart.setOption(mapOption);

// Toggle button logic
const mapViewBtn = document.getElementById('mapViewBtn');
const barViewBtn = document.getElementById('barViewBtn');

mapViewBtn.addEventListener('click', function (e) {
  e.preventDefault();
  myChart.setOption(mapOption, true);
  currentView = 'map';
  mapViewBtn.classList.add('active');
  barViewBtn.classList.remove('active');
});

barViewBtn.addEventListener('click', function (e) {
  e.preventDefault();
  myChart.setOption(barOption, true);
  currentView = 'bar';
  barViewBtn.classList.add('active');
  mapViewBtn.classList.remove('active');
});


  });

  
});
</script>

<script>
  const buttons = document.querySelectorAll('.chart-toggle-btn');
  const description = document.getElementById('map-description');
  const mapFrame = document.getElementById('mapFrame');

  const descriptions = {
    "2018": `A natural starting point for exploring cultural networks is to map them geographically. 
        To understand how accessible different types of cultural infrastructure are across London, 
        we used the 15-minute city framework—focusing on whether people can reach venues within a 
        walkable 1km radius. We grouped these venues by type (cinemas, galleries, theatres, etc.) 
        to highlight the diversity of cultural infrastructure.
    Since the only verified datasets for cultural infrastructure in London come from 
    the Greater London Authority (GLA) for the years 2018 and 2023, we began by mapping the 
    2018 data to use as a baseline, before comparing it with 2023 to spot trends and changes….`,
    "2023": `…When we plotted the 2023 data, something surprising emerged: the map showed a much smaller network than in 2018—almost as if a large number of cultural venues had disappeared over just four years. As London-based GIS researchers, we found it odd, as it seemed unlikely that such a significant portion of the city’s cultural spaces would simply vanish. We decided to look more closely at the data behind the maps.`
  };

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      // Update active class
      buttons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      const year = btn.getAttribute('data-year');

      // Update description text
      description.textContent = descriptions[year];

      // Send message to iframe to update the year
      mapFrame.contentWindow.postMessage({ type: 'switchYear', year: year }, '*');
    });
  });
</script>
<!-- Cinemas chart -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const chartDom2 = document.getElementById('main2');
    const myChart2 = echarts.init(chartDom2);
    myChart2.showLoading();
  
    const LONDON_GEOJSON_URL = 'https://raw.githubusercontent.com/radoi90/housequest-data/master/london_boroughs.geojson';
  
    $.get(LONDON_GEOJSON_URL, function (londonJson) {
      myChart2.hideLoading();
      echarts.registerMap('London2', londonJson); // Unique map name
  
      const data2 =  [
    { name: 'Barking and Dagenham', value: 1 },
    { name: 'Barnet', value: 3 },
    { name: 'Bexley', value: 1 },
    { name: 'Brent', value: 3 },
    { name: 'Bromley', value: 3 },
    { name: 'Camden', value: 14 },
    { name: 'City of London', value: 2 },
    { name: 'Croydon', value: 3 },
    { name: 'Ealing', value: 1 },
    { name: 'Enfield', value: 2 },
    { name: 'Greenwich', value: 4 },
    { name: 'Hackney', value: 5 },
    { name: 'Hammersmith and Fulham', value: 4 },
    { name: 'Haringey', value: 5 },
    { name: 'Harrow', value: 1 },
    { name: 'Havering', value: 1 },
    { name: 'Hillingdon', value: 2 },
    { name: 'Hounslow', value: 3 },
    { name: 'Islington', value: 3 },
    { name: 'Kensington and Chelsea', value: 7 },
    { name: 'Kingston upon Thames', value: 1 },
    { name: 'Lambeth', value: 7 },
    { name: 'Lewisham', value: 2 },
    { name: 'Merton', value: 2 },
    { name: 'Newham', value: 2 },
    { name: 'Redbridge', value: 2 },
    { name: 'Richmond upon Thames', value: 3 },
    { name: 'Southwark', value: 7 },
    { name: 'Sutton', value: 0 },
    { name: 'Tower Hamlets', value: 6 },
    { name: 'Waltham Forest', value: 0 },
    { name: 'Wandsworth', value: 3 },
    { name: 'Westminster', value: 20 }
  ];

  const bardata2 = [
    { name: 'Barking and Dagenham', value: 0.069 },
    { name: 'Barnet', value: 0.177 },
    { name: 'Bexley', value: 0.061 },
    { name: 'Brent', value: 0.196 },
    { name: 'Bromley', value: 0.154 },
    { name: 'Camden', value: 0.77 },
    { name: 'City of London', value: 0.218 },
    { name: 'Croydon', value: 0.175 },
    { name: 'Ealing', value: 0.062 },
    { name: 'Enfield', value: 0.131 },
    { name: 'Greenwich', value: 0.225 },
    { name: 'Hackney', value: 0.276 },
    { name: 'Hammersmith and Fulham', value: 0.211 },
    { name: 'Haringey', value: 0.29 },
    { name: 'Harrow', value: 0.063 },
    { name: 'Havering', value: 0.059 },
    { name: 'Hillingdon', value: 0.122 },
    { name: 'Hounslow', value: 0.192 },
    { name: 'Islington', value: 0.156 },
    { name: 'Kensington and Chelsea', value: 0.364 },
    { name: 'Kingston upon Thames', value: 0.058 },
    { name: 'Lambeth', value: 0.37 },
    { name: 'Lewisham', value: 0.119 },
    { name: 'Merton', value: 0.117 },
    { name: 'Newham', value: 0.133 },
    { name: 'Redbridge', value: 0.126 },
    { name: 'Richmond upon Thames', value: 0.154 },
    { name: 'Southwark', value: 0.374 },
    { name: 'Sutton', value: 0 },
    { name: 'Tower Hamlets', value: 0.33 },
    { name: 'Waltham Forest', value: 0 },
    { name: 'Wandsworth', value: 0.15 },
    { name: 'Westminster', value: 1 }
  ];


  
  // Sort bardata2 alphabetically for chart
  bardata2.sort((a, b) => a.name.localeCompare(b.name));

const mapOption2 = {
  title: {
   text: 'Number of Cinemas per Borough',
   left: 'center',
    textStyle: {
      color: '#ffffff',
       fontFamily: 'Bricolage Grotesque',
       textTransform:'uppercase' ,
    }
  },
  tooltip: {
    trigger: 'item',
    formatter: '{b}: {c}',
    backgroundColor: '#333432',
    borderColor: '#ffffff',
    borderWidth: 1,
    textStyle: {
      color: '#fff',
      fontFamily: 'Bricolage Grotesque'
    },
    extraCssText: 'border-radius: 10px; padding: 10px;'
  },
  visualMap: {
    left: 'right',
    min: 0,
    max: 20,
    inRange: {
      color: ['#C79BF2', '#C8C2F2', '#C4E5F2', '#A0F2CC', '#5EF275']
    },
    text: ['High', 'Low'],
    calculable: true,
    textStyle: {
      color: '#ffffff',
      fontFamily: 'Bricolage Grotesque',
      fontSize: 14
    }
  },
  series: [{
    id: 'chart2_map',
    type: 'map',
    roam: false,
    map: 'London2',
    animationDurationUpdate: 1000,
    universalTransition: true,
    data: data2,
    itemStyle: {
      areaColor: '#333333'
    },
    emphasis: {
      itemStyle: {
        areaColor: '#ffffff'
      },
      label: {
        color: '#000000',
        fontFamily: 'Bricolage Grotesque'
      }
    },
    label: {
      color: '#ffffff',
      fontFamily: 'Bricolage Grotesque'
    }
  }],
  backgroundColor: 'transparent'
};

const barOption2 = {
  title: {
    text: 'Cinema Economic Accessibility',
    left: 'center',
    textStyle: {
      color: '#ffffff',
      fontFamily: 'Bricolage Grotesque'
    }
  },
  tooltip: {
    trigger: 'axis',
    axisPointer: {
      type: 'shadow'
    },
    backgroundColor: '#333432',
    textStyle: {
      color: '#ffffff',
      fontFamily: 'Bricolage Grotesque'
    }
  },
  yAxis: {
    type: 'value',
    name: 'Normalized Cinema Financial Accessibility Index (0-1)',
    nameGap: 55,
    nameTextStyle: {
      color: '#ffffff',
      fontFamily: 'Bricolage Grotesque',
      fontSize: 12,
      rotate: 90
    },
    axisLine: { lineStyle: { color: '#ffffff' } },
    axisLabel: { color: '#ffffff', fontFamily: 'Bricolage Grotesque' },
    splitLine: { lineStyle: { color: '#555555' } }
  },
  xAxis: {
    type: 'category',
    name: 'London Borough',
    nameLocation: 'middle',
    nameGap: 130,
    nameTextStyle: {
      color: '#ffffff',
      fontFamily: 'Bricolage Grotesque',
      fontSize: 12
    },
    axisLabel: {
      rotate: 45,
      color: '#ffffff',
      fontFamily: 'Bricolage Grotesque',
      fontSize: 10,
      margin: 15
    },
    axisLine: { lineStyle: { color: '#ffffff' } },
    data: bardata2.map(d => d.name)
  },
  animationDurationUpdate: 2000,
  grid: {
    left: '3%',
    right: '4%',
    bottom: '20%',
    top: '15%',
    containLabel: true
  },
  series: [{
    id: 'chart2_bar',
    type: 'bar',
    universalTransition: true,
    data: bardata2.map(item => {
      const boroughValue = data2.find(d => d.name === item.name)?.value || 0;
      let color = '#9a63ff';
      if (boroughValue >= 10) color = '#5EF275';
      else if (boroughValue >= 5) color = '#a2dff5';
      return {
        value: item.value,
        itemStyle: { color }
      };
    })
  }],
  backgroundColor: '#333333'
};

let currentView2 = 'map';
myChart2.setOption(mapOption2);

// Toggle buttons logic
const mapViewBtn2 = document.getElementById('mapViewBtn2');
const barViewBtn2 = document.getElementById('barViewBtn2');

mapViewBtn2.addEventListener('click', function (e) {
  e.preventDefault();
  myChart2.setOption(mapOption2, true);
  currentView2 = 'map';
  mapViewBtn2.classList.add('active');
  barViewBtn2.classList.remove('active');
});

barViewBtn2.addEventListener('click', function (e) {
  e.preventDefault();
  myChart2.setOption(barOption2, true);
  currentView2 = 'bar';
  barViewBtn2.classList.add('active');
  mapViewBtn2.classList.remove('active');
});
});
});
</script>
  </script>
  

</body>
</html>
